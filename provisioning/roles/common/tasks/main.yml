---

- name: Installing common packages
  debug: 
    msg: 'Installing yum packages on {{ env }}'

- name: Check whether common group present
  group:
    name: '{{ vagrant_group }}'
    state: present

- name: Check whether common user present
  user:
    name: '{{ vagrant_user }}'
    state: present

# Download and install EPEL for Centos/RHEL version 7
- name: Download EPEL Repo - Centos/RHEL 7
  get_url:
    url: 'http://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm'
    dest: '/tmp/epel-release-latest-7.noarch.rpm'
  when: "ansible_os_family == 'RedHat' and ansible_distribution_major_version == '7'"


- name: Install EPEL Repo - Centos/RHEL 7
  command: 'rpm -ivh /tmp/epel-release-latest-7.noarch.rpm'
  args:
    creates: '/etc/yum.repos.d/epel.repo'
  when: "ansible_os_family == 'RedHat' and ansible_distribution_major_version == '7'"


- name: Install libselinux-python
  yum: 
    name: 'libselinux-python'

- name: Install common sofware
  yum:
    name: '{{ item }}'
    state: installed
  with_items:
    - git
    - htop
    - nano
    - vim
    - tree
